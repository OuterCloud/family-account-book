# 功能规格说明：家庭账本应用

**功能分支**：`001-family-account-book`  
**创建日期**：2025-10-25  
**状态**：草稿  
**输入**：用户描述："开发一个家庭账本应用，支持记录和分析家庭收支，具体需求包括：- 基础记录功能： - 自定义支出分类（如人情往来、交通、房租水电、宝宝用品等） - 记录每笔支出的时间、明细内容和价格（例如：2015 年 10 月 15 日购买尿不湿，118 元） - 记录工资收入及五险一金扣除明细- 数据对比与分析功能： - 月度支出统计（总支出、分类支出及占比） - 特定时间段分类支出统计（如近 3 个月尿不湿总花费） - 不同月份同一分类支出纵向对比（如每月餐饮支出波动） - 分类支出占总支出的百分比分析- 数据存储与查看： - 存储所有收支数据供后续查询 - 支持随时查看收支情况和分析结果，未来可扩展自动跟踪功能"

## 用户场景与测试 _(必填)_

### 用户故事 1 - 记录支出 (优先级：P1)

用户可以记录家庭的日常支出，包括自定义分类、时间、明细和金额。

**为什么这个优先级**：这是核心功能，用户需要首先能记录支出数据。

**独立测试**：可以独立测试记录功能，通过添加支出条目并验证数据存储。

**验收场景**：

1. **假设** 用户打开应用，**当** 输入支出详情（分类、时间、明细、金额），**那么** 支出被保存并显示在列表中。
2. **假设** 用户选择自定义分类，**当** 添加新分类，**那么** 新分类可用。

---

### 用户故事 2 - 记录收入 (优先级：P2)

用户可以记录工资收入及扣除明细。

**为什么这个优先级**：收入记录是收支平衡的重要部分。

**独立测试**：可以独立测试收入记录，通过添加收入条目并验证扣除明细。

**验收场景**：

1. **假设** 用户输入工资收入，**当** 添加五险一金扣除，**那么** 净收入计算正确。

---

### 用户故事 3 - 查看月度统计 (优先级：P3)

用户可以查看月度支出统计，包括总支出和分类占比。

**为什么这个优先级**：提供基本分析功能。

**独立测试**：可以独立测试统计，通过记录数据后查看月度报告。

**验收场景**：

1. **假设** 有支出数据，**当** 选择月份，**那么** 显示总支出和分类占比。

---

### 用户故事 4 - 查看分类分析 (优先级：P3)

用户可以查看特定时间段分类支出、纵向对比和百分比分析。

**为什么这个优先级**：提供深入分析。

**独立测试**：可以独立测试分析，通过数据查看对比图表。

**验收场景**：

1. **假设** 有历史数据，**当** 选择时间段和分类，**那么** 显示统计和对比。

### 边界情况

- 无效日期输入：系统应提示错误并拒绝保存。
- 负金额：不允许负金额支出。
- 空分类：必须选择或创建分类。

## 需求 _(必填)_

### 功能需求

- **FR-001**：系统必须允许用户创建和管理自定义支出分类。
- **FR-002**：系统必须记录支出交易，包括日期、描述、金额和分类。
- **FR-003**：系统必须记录收入交易，包括工资和扣除明细。
- **FR-004**：系统必须提供月度支出统计，包括总支出和分类细分。
- **FR-005**：系统必须允许查询特定时间段的分类支出。
- **FR-006**：系统必须提供分类的月度对比。
- **FR-007**：系统必须计算并显示分类支出占总支出的百分比。
- **FR-008**：系统必须存储所有交易数据以供未来查询。
- **FR-009**：系统必须允许查看交易历史和分析结果。

### 关键实体 _(如果涉及数据)_

- **交易**：表示收入或支出，包括日期、金额、类型、分类、描述。
- **分类**：自定义支出分类，可能有子分类。
- **收入明细**：收入扣除的细分。

## 成功标准 _(必填)_

### 可测量成果

- **SC-001**：用户可以在 30 秒内记录一笔支出。
- **SC-002**：对于 1000 笔交易，月度统计加载时间在 5 秒内。
- **SC-003**：95%的用户可以无需帮助找到并查看分类分析。
- **SC-004**：系统准确计算所有数据的总数和百分比。
